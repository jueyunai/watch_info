# æ–°åŠŸèƒ½ï¼šè®¨è®ºæ•°æ®è·å–

## åŠŸèƒ½æ¦‚è¿°

åœ¨åŸæœ‰çš„çŒ¹è¯„è·å–åŠŸèƒ½åŸºç¡€ä¸Šï¼Œæ–°å¢äº†"è®¨è®º"æ•°æ®è·å–åŠŸèƒ½ã€‚ç”¨æˆ·ç°åœ¨å¯ä»¥é€‰æ‹©è·å–ï¼š
- **çŒ¹è¯„**ï¼šç”¨æˆ·å¯¹ä½œå“çš„è¯„ä»·
- **è®¨è®º**ï¼šç”¨æˆ·å‘å¸ƒçš„è®¨è®ºå¸–å­

## åŠŸèƒ½ç‰¹æ€§

### 1. æ•°æ®ç±»å‹é€‰æ‹©

åœ¨ç•Œé¢ä¸Šæ·»åŠ äº†å•é€‰æŒ‰é’®ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©è¦è·å–çš„æ•°æ®ç±»å‹ï¼š
- ğŸ¦” çŒ¹è¯„ï¼ˆé»˜è®¤ï¼‰
- ğŸ’¬ è®¨è®º

### 2. API æ¥å£

**è®¨è®ºæ•°æ®æ¥å£**ï¼š
```
https://watcha.cn/api/v2/users/{userId}/posts?_user_id={userId}&skip={skip}&limit={limit}
```

**å‚æ•°è¯´æ˜**ï¼š
- `userId`: ç”¨æˆ· ID
- `skip`: è·³è¿‡çš„æ•°æ®æ¡æ•°ï¼ˆåˆ†é¡µï¼‰
- `limit`: æ¯é¡µæ•°æ®é‡ï¼ˆé»˜è®¤ 20ï¼‰

### 3. æ•°æ®ç»“æ„

**è®¨è®ºæ•°æ®ç±»å‹**ï¼š
```typescript
interface PostItem {
  id: number;
  title: string;
  content: ContentNode;
  update_at: string;
}

interface Post {
  id: number;
  title: string;
  updateAt: Date;
  content: string;
  rawUpdateAt: string;
}
```

### 4. åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | çŒ¹è¯„ | è®¨è®º |
|------|------|------|
| æ•°æ®è·å– | âœ… | âœ… |
| åˆ†é¡µåŠ è½½ | âœ… | âœ… |
| å»é‡å¤„ç† | âœ… | âœ… |
| æ—¶é—´ç­›é€‰ | âœ… | âœ… |
| å¯¼å‡º TXT | âœ… | âœ… |
| è¿›åº¦æ˜¾ç¤º | âœ… | âœ… |

## å®ç°ç»†èŠ‚

### 1. ç±»å‹å®šä¹‰

**æ–°å¢ç±»å‹** (`src/types/index.ts`):
```typescript
// è®¨è®ºç›¸å…³ç±»å‹
export interface PostItem {
  id: number;
  title: string;
  content: ContentNode;
  update_at: string;
}

export interface PostsResponse {
  total: number;
  skip: number;
  limit: number;
  count: number;
  items: PostItem[];
}

export interface Post {
  id: number;
  title: string;
  updateAt: Date;
  content: string;
  rawUpdateAt: string;
}
```

### 2. API æœåŠ¡

**æ–°å¢å‡½æ•°** (`src/services/api.ts`):
```typescript
// è·å–å•é¡µè®¨è®º
export async function fetchPosts(
  userId: number,
  skip: number = 0,
  limit: number = PAGE_SIZE
): Promise<PostsResponse>

// è·å–æ‰€æœ‰è®¨è®ºï¼ˆåˆ†é¡µ + å»é‡ï¼‰
export async function fetchAllPosts(
  userId: number,
  onProgress?: (loaded: number, total: number) => void
): Promise<PostItem[]>
```

### 3. æ•°æ®å¤„ç†

**æ–°å¢å‡½æ•°** (`src/utils/reviewProcessor.ts`):
```typescript
// è½¬æ¢å•æ¡è®¨è®º
export function transformPost(item: PostItem): Post

// è½¬æ¢è®¨è®ºåˆ—è¡¨
export function transformPosts(items: PostItem[]): Post[]

// æŒ‰æ—¥æœŸæ’åº
export function sortPostsByDate(posts: Post[], descending?: boolean): Post[]

// æŒ‰æœˆä»½ç­›é€‰
export function filterPostsByMonth(posts: Post[], year: number, month: number): Post[]
```

### 4. å¯¼å‡ºåŠŸèƒ½

**æ–°å¢å‡½æ•°** (`src/utils/exporter.ts`):
```typescript
// æ ¼å¼åŒ–å•æ¡è®¨è®º
export function formatPostForExport(post: Post): string

// æ ¼å¼åŒ–è®¨è®ºåˆ—è¡¨
export function formatPostsForExport(posts: Post[]): string

// å¯¼å‡ºè®¨è®ºåˆ° TXT
export function exportPostsToTxt(posts: Post[], filename?: string): void
```

### 5. ç•Œé¢æ›´æ–°

**HTML å˜æ›´** (`index.html`):
- æ·»åŠ æ•°æ®ç±»å‹é€‰æ‹©å™¨ï¼ˆå•é€‰æŒ‰é’®ï¼‰
- æ›´æ–°æ ‡é¢˜å’Œè¯´æ˜æ–‡å­—
- å°† `reviews-list` æ”¹ä¸ºé€šç”¨çš„ `data-list`

**CSS å˜æ›´** (`src/style.css`):
- æ·»åŠ  `.type-selector` æ ·å¼
- æ·»åŠ  `.radio-label` æ ·å¼
- æ·»åŠ  `.post-item`, `.post-header`, `.post-title`, `.post-time`, `.post-content` æ ·å¼
- å°† `.reviews-list` æ”¹ä¸º `.data-list`

**JavaScript å˜æ›´** (`src/main.ts`):
- æ·»åŠ  `currentDataType` çŠ¶æ€
- æ·»åŠ  `allPosts` å’Œ `filteredPosts` çŠ¶æ€
- æ·»åŠ  `renderPostItem()` å‡½æ•°
- æ›´æ–° `fetchData()` æ”¯æŒä¸¤ç§æ•°æ®ç±»å‹
- æ›´æ–° `handleExport()` æ”¯æŒä¸¤ç§å¯¼å‡ºæ ¼å¼
- æ›´æ–° `applyFilter()` æ”¯æŒä¸¤ç§æ•°æ®ç­›é€‰
- æ›´æ–° `updateStats()` æ˜¾ç¤ºä¸åŒçš„ç»Ÿè®¡ä¿¡æ¯

## ä½¿ç”¨æ–¹æ³•

### 1. è·å–çŒ¹è¯„ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰

1. è¾“å…¥è§‚çŒ¹ä¸ªäººä¸»é¡µåœ°å€
2. é€‰æ‹©"çŒ¹è¯„"ï¼ˆé»˜è®¤é€‰ä¸­ï¼‰
3. ç‚¹å‡»"è·å–æ•°æ®"
4. ç­‰å¾…æ•°æ®åŠ è½½å®Œæˆ
5. å¯é€‰ï¼šæŒ‰æœˆä»½ç­›é€‰
6. ç‚¹å‡»"å¯¼å‡º TXT"

### 2. è·å–è®¨è®ºï¼ˆæ–°åŠŸèƒ½ï¼‰

1. è¾“å…¥è§‚çŒ¹ä¸ªäººä¸»é¡µåœ°å€
2. é€‰æ‹©"è®¨è®º"
3. ç‚¹å‡»"è·å–æ•°æ®"
4. ç­‰å¾…æ•°æ®åŠ è½½å®Œæˆ
5. å¯é€‰ï¼šæŒ‰æœˆä»½ç­›é€‰
6. ç‚¹å‡»"å¯¼å‡º TXT"

## å¯¼å‡ºæ ¼å¼

### çŒ¹è¯„å¯¼å‡ºæ ¼å¼

```
çŒ¹è¯„å¯¼å‡º
å¯¼å‡ºæ—¶é—´ï¼š2025-12-02 00:30:00
å…± 26 æ¡çŒ¹è¯„

==================================================

1. ã€ä½œå“åç§°ã€‘
æ—¶é—´ï¼š2025-07-18 12:54
å†…å®¹ï¼šçŒ¹è¯„å†…å®¹...

==================================================

2. ã€ä½œå“åç§°ã€‘
...
```

### è®¨è®ºå¯¼å‡ºæ ¼å¼

```
è®¨è®ºå¯¼å‡º
å¯¼å‡ºæ—¶é—´ï¼š2025-12-02 00:30:00
å…± 15 æ¡è®¨è®º

==================================================

1. ã€è®¨è®ºæ ‡é¢˜ã€‘
æ—¶é—´ï¼š2025-07-18 11:51
å†…å®¹ï¼šè®¨è®ºå†…å®¹...

==================================================

2. ã€è®¨è®ºæ ‡é¢˜ã€‘
...
```

## æŠ€æœ¯ç‰¹ç‚¹

### 1. ä»£ç å¤ç”¨

- å¤ç”¨äº†ç°æœ‰çš„åˆ†é¡µé€»è¾‘
- å¤ç”¨äº†å»é‡æœºåˆ¶
- å¤ç”¨äº†æ—¶é—´ç­›é€‰åŠŸèƒ½
- å¤ç”¨äº†å¯¼å‡ºæ¡†æ¶

### 2. ä¸€è‡´æ€§

- API è°ƒç”¨æ–¹å¼ä¸€è‡´
- æ•°æ®å¤„ç†æµç¨‹ä¸€è‡´
- ç”¨æˆ·ç•Œé¢äº¤äº’ä¸€è‡´
- é”™è¯¯å¤„ç†æ–¹å¼ä¸€è‡´

### 3. å¯æ‰©å±•æ€§

- æ˜“äºæ·»åŠ æ–°çš„æ•°æ®ç±»å‹
- ç»Ÿä¸€çš„æ•°æ®å¤„ç†æ¥å£
- æ¨¡å—åŒ–çš„ä»£ç ç»“æ„

## æµ‹è¯•å»ºè®®

### 1. åŠŸèƒ½æµ‹è¯•

- âœ… æµ‹è¯•è·å–çŒ¹è¯„åŠŸèƒ½æ˜¯å¦æ­£å¸¸
- âœ… æµ‹è¯•è·å–è®¨è®ºåŠŸèƒ½æ˜¯å¦æ­£å¸¸
- âœ… æµ‹è¯•åˆ‡æ¢æ•°æ®ç±»å‹
- âœ… æµ‹è¯•æ—¶é—´ç­›é€‰
- âœ… æµ‹è¯•å¯¼å‡ºåŠŸèƒ½

### 2. è¾¹ç•Œæµ‹è¯•

- æµ‹è¯•æ²¡æœ‰è®¨è®ºçš„ç”¨æˆ·
- æµ‹è¯•è®¨è®ºæ•°é‡å¾ˆå¤šçš„ç”¨æˆ·
- æµ‹è¯•è®¨è®ºæ•°é‡æ­£å¥½ 20 æ¡çš„ç”¨æˆ·
- æµ‹è¯•è®¨è®ºæ•°é‡è¶…è¿‡ 20 æ¡çš„ç”¨æˆ·

### 3. é”™è¯¯å¤„ç†

- æµ‹è¯• API è¿”å›é”™è¯¯
- æµ‹è¯•ç½‘ç»œé”™è¯¯
- æµ‹è¯•ç”¨æˆ·ä¸å­˜åœ¨

## å·²çŸ¥é™åˆ¶

1. **API é™åˆ¶**ï¼šä¾èµ–è§‚çŒ¹ API çš„å¯ç”¨æ€§å’Œç¨³å®šæ€§
2. **æ•°æ®æ ¼å¼**ï¼šå‡è®¾è®¨è®ºæ•°æ®ç»“æ„ä¸çŒ¹è¯„ç±»ä¼¼
3. **æ€§èƒ½**ï¼šå¤§é‡æ•°æ®æ—¶å¯èƒ½éœ€è¦è¾ƒé•¿åŠ è½½æ—¶é—´

## åç»­ä¼˜åŒ–

1. **ç¼“å­˜æœºåˆ¶**ï¼šé¿å…é‡å¤è·å–ç›¸åŒæ•°æ®
2. **æ‰¹é‡å¯¼å‡º**ï¼šåŒæ—¶å¯¼å‡ºçŒ¹è¯„å’Œè®¨è®º
3. **æœç´¢åŠŸèƒ½**ï¼šåœ¨å·²è·å–çš„æ•°æ®ä¸­æœç´¢
4. **æ›´å¤šç­›é€‰**ï¼šæŒ‰å…³é”®è¯ã€æŒ‰ä½œå“ç­‰

---

**åŠŸèƒ½æ·»åŠ æ—¥æœŸ**: 2025-12-02  
**æäº¤**: d9b638c  
**çŠ¶æ€**: å·²å®Œæˆå¹¶éƒ¨ç½²
